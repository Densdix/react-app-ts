"use strict";(self.webpackChunkreact_app_ts=self.webpackChunkreact_app_ts||[]).push([[968],{7968:function(e,r,n){n.r(r),n.d(r,{default:function(){return C}});var t=n(2791),s=n(1413),l=n(8137),i=n(7689),o=n(1087),a="Users_activeTab__BIY+m",c="Users_tab__swPRc",u="Users_cell__bkdPh",d="Users_arrowBtn__mhldG",f=n(184),m=function(e){var r=e.pages,n=e.currentPage,t=e.updateCurrentPage,s=n,l=s-5<0?0:s+5>r.length?r.length-10:s-5,i=s-5<0?10:s+5>r.length?r.length:s+5,o=r.slice(l,i);return(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{children:(0,f.jsx)("button",{className:d,disabled:1===n,onClick:function(){return t(1)},children:"<<"})}),(0,f.jsx)("span",{children:(0,f.jsx)("button",{className:d,disabled:1===n,onClick:function(){return t(s-1)},children:"<"})}),o.map((function(e){return(0,f.jsx)("span",{onClick:function(){return t(e)},className:"".concat(c),children:(0,f.jsx)("span",{className:"".concat(u," ").concat(n===e&&a," "),children:e})})})),(0,f.jsx)("span",{children:(0,f.jsx)("button",{className:d,disabled:n===r.length,onClick:function(){return t(s+1)},children:">"})}),(0,f.jsx)("span",{children:(0,f.jsx)("button",{className:d,disabled:n===r.length,onClick:function(){return t(r.length)},children:">>"})})]})},h=n(6315),g=n(5705),x=n(8995),b=n(3153),p=function(e){var r=e.getUsers,n=e.setFilter,t=(0,b.CG)((function(e){return e.usersPage.filter}));return(0,f.jsx)(g.J9,{enableReinitialize:!0,initialValues:{term:t.term,friend:String(t.friend)},onSubmit:function(e,t){var s=t.setSubmitting;setTimeout((function(){console.log(e);var t="null"===e.friend?null:"true"===e.friend;n(e.term,t),r(void 0,void 0,e.term,t),s(!1)}),400)},children:function(e){var r=e.isSubmitting;return(0,f.jsxs)(g.l0,{children:[(0,f.jsx)(g.gN,{type:"text",name:"term",placeholder:"Filter users"}),(0,f.jsxs)(g.gN,{name:"friend",as:"select",children:[(0,f.jsx)("option",{value:"null",children:"All"}),(0,f.jsx)("option",{value:"true",children:"Only followed"}),(0,f.jsx)("option",{value:"false",children:"Only unfollowed"})]}),(0,f.jsx)("button",{className:"ml-1 bg-blue-500 hover:bg-blue-400 text-white font-bold px-1 hover:border-blue-500 rounded",type:"submit",disabled:r,children:"Send (Formik)"})]})}})},j=function(e){var r=e.getUsers,n=e.setFilter,l=(0,b.CG)((function(e){return e.usersPage.filter})),i=(0,x.cI)({mode:"onChange"}),o=i.register,a=i.handleSubmit,c=i.reset,u=i.formState.errors;return(0,t.useEffect)((function(){c((function(e){return(0,s.Z)((0,s.Z)({},e),{},{friend:String(l.friend),term:l.term})}))}),[l]),(0,f.jsxs)("form",{className:"py-2",onSubmit:a((function(e){console.log(e);var t="null"===e.friend?null:"true"===e.friend;n(e.term,t),r(void 0,void 0,e.term,t)})),children:[(0,f.jsx)("input",(0,s.Z)((0,s.Z)({defaultValue:l.term},o("term",{maxLength:255})),{},{type:"text",placeholder:"Filter users"})),u.term&&"maxLength"===u.term.type&&(0,f.jsx)("span",{children:"Max length 255 symbols"}),(0,f.jsxs)("select",(0,s.Z)((0,s.Z)({id:"friend"},o("friend",{maxLength:255})),{},{children:[(0,f.jsx)("option",{value:"null",children:"All"}),(0,f.jsx)("option",{value:"true",children:"Only followed"}),(0,f.jsx)("option",{value:"false",children:"Only unfollowed"})]})),(0,f.jsx)("button",{className:"ml-1 bg-blue-500 hover:bg-blue-400 text-white font-bold px-1 hover:border-blue-500 rounded",type:"submit",children:"Send (Hook)"})]})},v=function(){var e=(0,b.CG)((function(e){return e.usersPage.pageSize})),r=(0,b.CG)((function(e){return e.usersPage.totalUsersCount})),n=(0,b.CG)((function(e){return e.usersPage.currentPage})),a=(0,b.CG)((function(e){return e.usersPage.usersData})),c=((0,b.CG)((function(e){return e.usersPage.followingElements})),(0,b.CG)((function(e){return e.usersPage.filter}))),u=(0,b.TL)(),d=(0,b.NF)(),g=(0,i.TH)(),x=(0,i.s0)();(0,t.useEffect)((function(){var e=new URLSearchParams(g.search),r=e.get("friend"),t=e.get("page"),l=e.get("term"),i=(0,s.Z)({},c),o=n;switch(t&&(o=Number(t),u(h.BT.setCurrentPageActionCreator(Number(t))),console.log("queryPage")),l&&(i=(0,s.Z)((0,s.Z)({},i),{},{term:l}),console.log("queryTerm")),r){case"null":i=(0,s.Z)((0,s.Z)({},i),{},{friend:null});break;case"true":i=(0,s.Z)((0,s.Z)({},i),{},{friend:!0});break;case"false":i=(0,s.Z)((0,s.Z)({},i),{},{friend:!1})}(r||l)&&u(h.BT.setUserSearchFilterActionCreator(i.term,i.friend)),console.log("useEffect1:currentPage",n),console.log("User:searchParams",{queryFriend:r,queryPage:t,queryTerm:l}),v(void 0,o,i.term,i.friend)}),[]),(0,t.useEffect)((function(){v(e,n,c.term,c.friend),console.log("useEffect2:currentPage",n);var r=(0,o.fW)({page:"".concat(n),pageSize:"".concat(e),term:"".concat(c.term),friend:"".concat(c.friend)});r.delete("pageSize"),1===n&&r.delete("page"),null===c.friend&&r.delete("friend"),""===c.term&&r.delete("term"),x("/users?".concat(r))}),[e,n,c]);for(var v=function(e,r,n,t){d((0,h.Uk)(e,r,n,t))},w=function(e,r){u(h.BT.setUserSearchFilterActionCreator(e,r))},C=Math.ceil(r/e),N=[],P=1;P<=C;P++)N.push(P);return(0,f.jsxs)("div",{children:[(0,f.jsx)(p,{getUsers:v,setFilter:w}),(0,f.jsx)(j,{getUsers:v,setFilter:w}),(0,f.jsx)(m,{pages:N,currentPage:n,updateCurrentPage:function(r){u(h.BT.setCurrentPageActionCreator(r)),v(e,r)}}),(0,f.jsx)("div",{className:"grid grid-rows-5 grid-flow-col pt-4 sm:grid-rows-1",children:a.map((function(e){return(0,f.jsx)("div",{className:"bg-gray-100 flex items-center pb-2",children:(0,f.jsxs)("div",{className:"w-48 p-6 bg-white rounded-xl shadow-xl hover:shadow-2xl hover:scale-105 transition-all transform duration-500",children:[(0,f.jsx)(o.OL,{to:"/profile/"+e.id,children:(0,f.jsx)("img",{className:"w-40 object-cover rounded-t-md m-auto",src:null!=e.photos.small?e.photos.small:l,alt:""})}),(0,f.jsxs)("div",{className:"mt-4",children:[(0,f.jsx)("h1",{className:"text-sm font-bold text-gray-700",children:e.name}),(0,f.jsx)("p",{className:"text-xs mt-2 text-gray-700 break-all h-4",children:e.status}),(0,f.jsx)("div",{className:"mt-4 mb-2",children:e.followed?(0,f.jsx)("button",{className:"text-sm block font-semibold py-2 px-6 text-green-100 hover:text-white bg-red-400 rounded-lg shadow hover:shadow-md transition duration-300",onClick:function(){var r;r=e.id,d((0,h.gJ)(r))},children:"Unfollow"}):(0,f.jsx)("button",{className:"text-sm block font-semibold py-2 px-6 text-green-100 hover:text-white bg-green-400 rounded-lg shadow hover:shadow-md transition duration-300",onClick:function(){var r;r=e.id,d((0,h.V1)(r))},children:"Follow"})})]})]})})}))})]})},w=n(3445),C=(0,n(1548).D)((function(){var e=(0,b.CG)((function(e){return e.usersPage.isFetching}));return console.log("UC render"),(0,f.jsxs)(f.Fragment,{children:[e?(0,f.jsx)(w.Z,{}):null,(0,f.jsx)(v,{})]})}))}}]);
//# sourceMappingURL=968.c71a3402.chunk.js.map